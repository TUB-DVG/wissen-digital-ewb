{% extends 'base.html' %}
{% block title %}Überblick über die Wetterdaten-Services{% endblock %}
{% block content %}
{% load static %}
<!DOCTYPE html>

</head>

<body>

<!-- **************** MAIN CONTENT START **************** -->
<main>

<!-- =======================
Page Banner START -->
<section class="py-4">
	<div class="container">
		<div class="row">
			<div class="col-12">
				<div class="bg-light p-4 text-center rounded-3">
					<h1 class="m-0">Überblick über die Wetterdaten-Services</h1>
					
				</div>
			</div>
		</div>
	</div>
</section>
<!-- =======================
Page Banner END -->

{% include '../weatherdata_over/explanation.html' %}

<!-- =======================
Page content START -->
<section class="pt-0">
	<div class="container">

		
		<!-- Filter bar START -->
		<form class="bg-light border p-4 rounded-3 my-4 z-index-9 position-relative">
			<div class="row g-3">
				<!-- Input -->
				<div class="col-xl-3" title="Suchen in den Wetterdaten-Services">
					<input class="form-control me-1" type="search" placeholder="Suchbegriff" name='searched'>
				</div>

				<!-- Select item -->
				<div class="col-xl-7">
					<form  method="GET">
						<div class="row g-3">
							
							<!-- Select items -->
						<div class="form-group col-sm-6 col-md-3 pb-2 pb-md-0">
								<select class="form-select js-choice" aria-label=".form-select-sm example" name="1" title="Filtern nach der Kategorie der Anwendung"> 
									
									<option value="">Kategorie</option>
									
									<option value="Datensätze" {% if kategorie == "Datensätze" %} selected="selected" {% endif %}>Datensätze</option>
									<option value="Anwendung" {% if kategorie == "Anwendung" %} selected="selected" {% endif %}>Anwendung</option>
									
								</select>
								
							</div>

							<!-- Search item -->
							<div class="form-group col-sm-6 col-md-3 pb-2 pb-md-0">
								
								<select class="form-select js-choice" aria-label=".form-select-sm example" name="2" title="Filtern nach der Lizenz der Anwendung">
									
									<option value="">Lizenz</option>
									<option value="Frei nutzbar" {% if lizenz == "Frei nutzbar" %} selected="selected" {% endif %}>Frei nutzbar</option>
									<option value="Open Data" {% if lizenz == "Open Data" %} selected="selected" {% endif %}>Open Data</option>
									<option value="CC BY 4.0" {% if lizenz == "CC BY 4.0" %} selected="selected" {% endif %}>CC BY 4.0</option>
									<option value="MIT-Lizenz" {% if lizenz == "MIT-Lizenz" %} selected="selected" {% endif %}>MIT-Lizenz</option>
								</select>
							</div>

							<!-- Search item -->
							
						</div> <!-- Row END -->
					</form>

				</div>
				<!-- Clear -->
				<div class="col-xl-1">
					
                	<a href="{% url 'weatherdata_list' %}"> <h6 class="btn btn-primary mb-0 rounded z-index-1 w-100">Alle</h6></a>
					<!--<button class="btn btn-primary mb-0 rounded z-index-1 w-100" href="{% url 'tool_list' %}">Alle</button>-->
				</div>
				<!-- Button -->
				<div class="col-xl-1">
					<button type="submit" class="btn btn-primary mb-0 rounded z-index-1 w-100" href=""><i class="fas fa-search"></i></button>
				</div>
			</form>
			</div> <!-- Row END -->
		</form>
		<!-- Filter bar END -->

		<ul class="list-inline mb-0">
			{% if search %}
			<li class="list-inline-item"> 
				<div class="btn btn-outline-light btn-sm">
					<a href="/weatherdata_list/?searched={{search}}&1=&2=">Suchbegriff: {{search}}</a>
					<a href="/weatherdata_list/?searched=&1={% if kategorie %}{{kategorie}}{% endif %}&2={% if lizenz %}{{lizenz}}{% endif %}">
						<i class="bi bi-x fa-lg close-icon"></i>
					</a>
				</div>
			</li>
			{% endif %}	
			{% if kategorie %}
			<li class="list-inline-item">
				<div class="btn btn-outline-light btn-sm">
					<a href="/weatherdata_list/?searched=&1={{kategorie}}&2=">{{kategorie}}</a>
					<a href="/weatherdata_list/?searched={% if search %}{{search}}{% endif %}&1=&2={% if lizenz %}{{lizenz}}{% endif %}">
						<i class="bi bi-x fa-lg close-icon"></i>
					</a>
				</div>
			</li>
			{% endif %}	
			{% if lizenz %}
			<li class="list-inline-item">
				<div class="btn btn-outline-light btn-sm">
					<a href="/weatherdata_list/?searched=&1=&2={{lizenz}}">{{lizenz}}</a>
					<a href="/weatherdata_list/?searched={% if search %}{{search}}{% endif %}&1={% if kategorie %}{{kategorie}}{% endif %}&2=">
						<i class="bi bi-x fa-lg close-icon"></i>
					</a>
				</div>
			</li>
			{% endif %}
		</ul>


		<div class="row mt-3">
			<!-- Main content START -->
			<div class="col-12">

				<!-- Course Grid START -->
				<div class="row g-4">
					{% for weatherdata in page.object_list %}	
					<!-- Card item START -->
					<div class="col-sm-6 col-lg-4 col-xl-3">
						<div class="card shadow h-100">
							<div class="card-header text-right">
								<p class="mb-2 text-truncate-2">
								{{ weatherdata.category }}
								{% if weatherdata.category == 'Anwendung' %}
								<i class="bi bi-terminal fa-lg text-info ml-2"></i>
								{% elif weatherdata.category == 'Datensätze' %}
								<i class="fas fa-database text-info ml-2"></i>
								{% else %}
								<i class="fas fa-bars text-info ml-2"></i>
								{% endif %}
								</p>
							</div>
							<!-- Image -->
							<div class="image-container d-flex" style="height: 150px;">
								{%if weatherdata.image %}
								<img src="{{ weatherdata.image.url }}" class="card-img-top px-4 m-auto" style="max-height: 100%; width: auto; display: block;" alt="weatherdata image (if=db)">
								{% else %}
								<img src=" {%static 'img/Default.webp' %}" class="card-img-top px-4 m-auto" style="max-height: 100%; width: auto; display: block;" alt="weatherdata image (else)">
								{% endif %}
							</div>
							<!-- Card body -->
							<div class="card-body pb-0">
						
								<!-- Title -->
								<h5 class="card-title"><a href="{%url 'weatherdata_view' weatherdata.id %}"> {{ weatherdata.data_service   }}</a></h5>
								
								<p class="mb-2 text-truncate-2">Provider: {{ weatherdata.provider }}</p>
								
							
							</div>
							<!-- Card footer -->
							<div class="card-footer pt-0 pb-3">
								{% if weatherdata.last_update %}
								<hr>
								<div class="d-flex justify-content-between">
									<span class="h6 fw-light mb-0">
										{% if weatherdata.last_update == 'laufend' %}
										<i class="fas fa-sync text-success me-2"></i>Updates: {{ weatherdata.last_update }}
										{% else %}
										<i class="far fa-clock text-danger me-2"></i>Letztes Update: {{ weatherdata.last_update }}
										{% endif %}
										 </span>
									
								</div>
								{% endif %}
							</div>
						</div>
					</div>
					<!-- Card item END -->
					{% endfor %}
					
				</div>
				<!-- Course Grid END -->

				<!-- Pagination START -->
			<div class="col-12">
				<nav class="mt-4 d-flex justify-content-center" aria-label="navigation">
					<ul class="pagination pagination-primary-soft rounded mb-0">
						{% if page.has_previous %}
						<li class="page-item mb-0"><a class="page-link" href="{%url 'weatherdata_list' %}?page={{ page.previous_page_number}}" tabindex="-1"><i class="fas fa-angle-double-left"></i></a></li>
						{% else %}
						<!--<li class="page-item mb-0"><a class="page-link" href="#" tabindex="-1"><i class="fas fa-angle-double-left"></i></a></li>-->
						{% endif %}
						{% if page.has_next %}
						<li class="page-item mb-0"><a class="page-link" href="{%url 'weatherdata_list' %}?page={{ page.next_page_number}}"><i class="fas fa-angle-double-right"></i></a></li>
						{% else %}
						<!--<li class="page-item mb-0"><a class="page-link" href="#" ><i class="fas fa-angle-double-right"></i></a></li>-->
						{% endif %}
					</ul>
				</nav>
			</div>
			<!-- Pagination END -->
			</div>
			<!-- Main content END -->
		</div><!-- Row END -->
	</div>
</section>
<!-- =======================
Page content END -->


</main>
<!-- **************** MAIN CONTENT END **************** -->


{% endblock %}





