<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Django - Migrations &#8212; webcentral 0.0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=d1102ebc" />
    <link rel="stylesheet" type="text/css" href="../_static/basic.css?v=686e5160" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=27fed22d" />
    <script src="../_static/documentation_options.js?v=d45e8c67"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Running the app in production" href="production.html" />
    <link rel="prev" title="Data-Import" href="data_import.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="django-migrations">
<h1>Django - Migrations<a class="headerlink" href="#django-migrations" title="Link to this heading">Â¶</a></h1>
<p>Django provides a ORM (Object relational mapping), which abstracts the database structure. Entities of the relational database will be accessible as python objects.
Furthermore, django handles the database management. For Datamodels, which are created in a <code class="docutils literal notranslate"><span class="pre">models.py</span></code>, the corresponding database-tables are created and modified.</p>
<p>If a datamodel inside a <code class="docutils literal notranslate"><span class="pre">models.py</span></code> is modified, django needs a way of keeping track which changes it already executed inside the database. For that migrations are created.
These are python-files, which hold track of the modifications of the relational-database.</p>
<p>When model changes have been done in one of the django apps the command</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="o">./</span><span class="n">run</span> <span class="n">makemigrations</span>
</pre></div>
</div>
<p>needs to be performed to create the migrations. When new migrations have been created, they can be applied with the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>   <span class="o">./</span><span class="n">run</span> <span class="n">migrate</span>
</pre></div>
</div>
<p>Please note: The migrations should be seen as regular source code files, which need to be tracked by the version control system. When files are not beeing tracked it can lead to errors and inconcistencies, if migration-files are missing. If migration-files are lost or a inconcistent migration state is present, one way to reset the migration-system is to fake a initial migration.
When migration-files are missing and <code class="docutils literal notranslate"><span class="pre">makemigrations</span></code> is called, django re-creates a migration-file with the already executed changes. When executing <code class="docutils literal notranslate"><span class="pre">migrate</span></code> afterwards the relational database throws an error, since the attribute already exists. To fix this state, call the following commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>   <span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">makemigrations</span> <span class="o">&lt;</span><span class="n">app_name</span><span class="o">&gt;</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">migrate</span> <span class="o">&lt;</span><span class="n">app_name</span><span class="o">&gt;</span> <span class="o">--</span><span class="n">fake</span><span class="o">-</span><span class="n">intial</span>
</pre></div>
</div>
<p>That will mark all existing attributes as created and the migration-system can be used without errors again. Please make sure, that no newly added attributes are present in the <code class="docutils literal notranslate"><span class="pre">models.py</span></code> of the app of which the migrations should be fixed.</p>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">webcentral</a></h1>









<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_structure.html">Structure of the EWB Wissensplattform</a></li>
<li class="toctree-l1"><a class="reference internal" href="interacting_with_the_app.html">Interacting with the EWB Wissensplattform</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration_env_file.html">Configuration using .env file</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_import.html">Data-Import</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Django - Migrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="production.html">Running the app in production</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../templateStructure.html">Template structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../translation.html">Translation of Content</a></li>
<li class="toctree-l1"><a class="reference internal" href="../listing_pages.html">Listing pages</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="data_import.html" title="previous chapter">Data-Import</a></li>
      <li>Next: <a href="production.html" title="next chapter">Running the app in production</a></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2023, DVG.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.1.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="../_sources/general/migrations.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>