<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Documentation of the automated Tests &#8212; webcentral 0.0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=d1102ebc" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=12dfc556" />
    <script src="_static/documentation_options.js?v=d45e8c67"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="documentation-of-the-automated-tests">
<h1>Documentation of the automated Tests<a class="headerlink" href="#documentation-of-the-automated-tests" title="Link to this heading">¶</a></h1>
<p>The following Document explain the automated Tests in the folder.</p>
<p>The automated Tests are split into 3 Categories, which are Docker-, Database-, and FrontEnd-Tests.</p>
<section id="docker-tests">
<h2>Docker-Tests<a class="headerlink" href="#docker-tests" title="Link to this heading">¶</a></h2>
<p>The Docker-Tests build and start the docker-compose-development-environment (Heareafter “dev”) and the
docker-compose-production-environment (hereafter “prod”) and check, if the needed containers are present and healty and if
the needed volumes are present.</p>
</section>
<section id="database-tests">
<h2>Database-Tests<a class="headerlink" href="#database-tests" title="Link to this heading">¶</a></h2>
<p>The Database-Tests test the import functionality of the database. It is checked,
if the import-functionallity is working: This is done by importing testdata-sets and check,
if an .yaml-file is produced when conflicts occur. A conflict is present, if a dataset with a referenceNumber
is inserted into the Database, but is already present, with one or more differing fields. In this case
the conflict is described inside a .yaml-file. The tests check if the written .yaml-files are
consistent with what is present in the database.</p>
</section>
<section id="frontend-tests">
<h2>FrontEnd-Tests<a class="headerlink" href="#frontend-tests" title="Link to this heading">¶</a></h2>
<p>The Front-End-Tests check, if the userinterface is working as execpted. This is done by
define programatically  a series of user-actions, like clicking on buttons, hovering over elements
or write text into input fields. It is checked, if the Userinterface acts as expected.</p>
</section>
<section id="quick-start">
<h2>Quick Start<a class="headerlink" href="#quick-start" title="Link to this heading">¶</a></h2>
<p>To execute the tests, a python virtual environment has to be definied. For that
the folder needs to be changed into the <code class="docutils literal notranslate"><span class="pre">10_test</span></code>-folder:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">cd</span> <span class="mi">02</span><span class="n">_work_doc</span><span class="o">/</span><span class="mi">10</span><span class="n">_test</span>
</pre></div>
</div>
<p>There, the venv-command is executed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">venv</span> <span class="n">testingVenv</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">testingVenv</span></code> needs to be activated:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="o">.</span> <span class="n">testingVenv</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">activate</span>
</pre></div>
</div>
<p>Now the python packets are installed into <code class="docutils literal notranslate"><span class="pre">testingVenv</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">r</span> <span class="n">requirementsTesting</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>After that, <code class="docutils literal notranslate"><span class="pre">testingVenv</span></code> canbe deactivated:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">deactivate</span>
</pre></div>
</div>
<p>The tests cant be executed on an empty database, because then, the <code class="docutils literal notranslate"><span class="pre">ptjuser</span></code> is not present, and the
websites cant be accessed. Thats why an valid dumpfile needs to be specified in the <code class="docutils literal notranslate"><span class="pre">.env</span></code>-file.
For that, go into the webcentral root-directory and check, if the filename in the .env-file,
which is assigned to <code class="docutils literal notranslate"><span class="pre">DATABASE_PLAIN_SQL_FILE</span></code> environmental-variable is present in <code class="docutils literal notranslate"><span class="pre">postgres/</span></code>-folder.</p>
<p>If you made custom changes to the database, you need to backup it, following the instructions from
<code class="docutils literal notranslate"><span class="pre">02_work_doc/05_deployment/02_docker/01_db_backup_strategies/dbBackupStrategies.md</span></code></p>
<p>For executing the tests Bash-scripts are present in <code class="docutils literal notranslate"><span class="pre">scripts/</span></code>.
One can execute only one of the 3 testcategories by executing the corresponding bash-script from the repo-root-folder:
For the Docker-Test:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">bash</span> <span class="n">scripts</span><span class="o">/</span><span class="n">runSystemTests</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<p>For the Database-Tests:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">bash</span> <span class="n">scripts</span><span class="o">/</span><span class="n">runDBImportTests</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<p>For the FrontEnd-Tests:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">bash</span> <span class="n">scripts</span><span class="o">/</span><span class="n">runSeleniumTests</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<p>If all 3 Testcategories need to be run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">bash</span> <span class="n">scripts</span><span class="o">/</span><span class="n">runAllTests</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
</section>
</section>
<section id="selenium-test-structure">
<h1>Selenium Test-Structure<a class="headerlink" href="#selenium-test-structure" title="Link to this heading">¶</a></h1>
<p>The User-Interface Tests use the PageObject-Pattern.
This is a Design-Pattern popular in Test automation. The Goal of this pattern is
to enhance test maintanance and reduce code duplication. In this design pattern
parts of the User-Interface, which are under test, are modeled as classes.
They are instanciated by the Tests. The advantage of this pattern is, that if the
UI changes, only the page obejcts need to be adapated. The tests stay as they are.</p>
<section id="advantages-of-pageobject-pattern">
<h2>Advantages of PageObject Pattern<a class="headerlink" href="#advantages-of-pageobject-pattern" title="Link to this heading">¶</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>- There is a clean separation between test code and page specfic code
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="o">/***</span>
    <span class="o">*</span> <span class="n">Tests</span> <span class="n">login</span> <span class="n">feature</span>
    <span class="o">*/</span>
    <span class="n">public</span> <span class="k">class</span> <span class="nc">Login</span> <span class="p">{</span>

    <span class="n">public</span> <span class="n">void</span> <span class="n">testLogin</span><span class="p">()</span> <span class="p">{</span>
        <span class="o">//</span> <span class="n">fill</span> <span class="n">login</span> <span class="n">data</span> <span class="n">on</span> <span class="n">sign</span><span class="o">-</span><span class="ow">in</span> <span class="n">page</span>
        <span class="n">driver</span><span class="o">.</span><span class="n">findElement</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">name</span><span class="p">(</span><span class="s2">&quot;user_name&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">sendKeys</span><span class="p">(</span><span class="s2">&quot;userName&quot;</span><span class="p">);</span>
        <span class="n">driver</span><span class="o">.</span><span class="n">findElement</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">name</span><span class="p">(</span><span class="s2">&quot;password&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">sendKeys</span><span class="p">(</span><span class="s2">&quot;my supersecret password&quot;</span><span class="p">);</span>
        <span class="n">driver</span><span class="o">.</span><span class="n">findElement</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">name</span><span class="p">(</span><span class="s2">&quot;sign-in&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">click</span><span class="p">();</span>

        <span class="o">//</span> <span class="n">verify</span> <span class="n">h1</span> <span class="n">tag</span> <span class="ow">is</span> <span class="s2">&quot;Hello userName&quot;</span> <span class="n">after</span> <span class="n">login</span>
        <span class="n">driver</span><span class="o">.</span><span class="n">findElement</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">tagName</span><span class="p">(</span><span class="s2">&quot;h1&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">isDisplayed</span><span class="p">();</span>
        <span class="n">assertThat</span><span class="p">(</span><span class="n">driver</span><span class="o">.</span><span class="n">findElement</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">tagName</span><span class="p">(</span><span class="s2">&quot;h1&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">getText</span><span class="p">(),</span> <span class="ow">is</span><span class="p">(</span><span class="s2">&quot;Hello userName&quot;</span><span class="p">));</span>
    <span class="p">}</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>Problems with this approac:
- no separation between test-methods and locators of the testObject. If the identifers or
the layout changes, the whole test needs to be changed.
- the IDs of the objects are spread accross several files. They need to be changed in every file.</p>
<ul class="simple">
<li><p>In PageObjects, there are no Assertations</p></li>
<li><p>Assertations should be only in test code.</p></li>
</ul>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">webcentral</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="general/getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="general/data_import.html">Data-Import</a></li>
<li class="toctree-l1"><a class="reference internal" href="general/data_import.html#tracking-differences-after-data-import">Tracking differences after data-import</a></li>
<li class="toctree-l1"><a class="reference internal" href="general/migrations.html">Django - Migrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="general/production.html">Running the app in production</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="dev/style_guide.html">Style Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev/static_code_analysis.html">Static code analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev/pyproject_toml.html">pyproject.toml</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev/testing.html">Testing the Wissensplattform</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev/load_profiles.html">Load Profiles</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev/plotly_apps.html">Plotly Apps</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev/plotly_apps.html#framework">Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev/csp.html">Content security policy (CSP)</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev/use_cases.html">Use Cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev/use_cases.html#usecase-model-documentation"><code class="docutils literal notranslate"><span class="pre">UseCase</span></code> Model Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev/use_cases.html#use-cases-plotly-documentation">Use Cases plotly documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev/use_cases.html#further-information">Further Information</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev/save_page_views.html">Page views</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="templateStructure.html">Template structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="translation.html">Translation of Content</a></li>
<li class="toctree-l1"><a class="reference internal" href="listing_pages.html">Listing pages</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2023, DVG.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 7.4.7</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 0.7.16</a>
      
      |
      <a href="_sources/test_documentation.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>