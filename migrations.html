<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Django - Migrations &#8212; webcentral 0.0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=d1102ebc" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=12dfc556" />
    <script src="_static/documentation_options.js?v=d45e8c67"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Content security policy (CSP)" href="contentSecurityPolicy.html" />
    <link rel="prev" title="Welcome to webcentral’s documentation!" href="index.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="django-migrations">
<h1>Django - Migrations<a class="headerlink" href="#django-migrations" title="Link to this heading">¶</a></h1>
<p>Django provides a ORM (Object relational mapping), which abstracts the database structure. Entities of the relational database will be accessible as python objects.
Furthermore, django handles the database management. For Datamodels, which are created in a <code class="docutils literal notranslate"><span class="pre">models.py</span></code>, the corresponding database-tables are created and modified.</p>
<p>If a datamodel inside a <code class="docutils literal notranslate"><span class="pre">models.py</span></code> is modified, django needs a way of keeping track which changes it already executed inside the database. For that migrations are created.
These are python-files, which hold track of the modifications of the relational-database.</p>
<p>When model changes have been done in one of the django apps the command</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="o">./</span><span class="n">run</span> <span class="n">makemigrations</span>
</pre></div>
</div>
<p>needs to be performed to create the migrations. When new migrations have been created, they can be applied with the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>   <span class="o">./</span><span class="n">run</span> <span class="n">migrate</span>
</pre></div>
</div>
<p>Please note: The migrations should be seen as regular source code files, which need to be tracked by the version control system. When files are not beeing tracked it can lead to errors and inconcistencies, if migration-files are missing. If migration-files are lost or a inconcistent migration state is present, one way to reset the migration-system is to fake a initial migration.
When migration-files are missing and <code class="docutils literal notranslate"><span class="pre">makemigrations</span></code> is called, django re-creates a migration-file with the already executed changes. When executing <code class="docutils literal notranslate"><span class="pre">migrate</span></code> afterwards the relational database throws an error, since the attribute already exists. To fix this state, call the following commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>   <span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">makemigrations</span> <span class="o">&lt;</span><span class="n">app_name</span><span class="o">&gt;</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">migrate</span> <span class="o">&lt;</span><span class="n">app_name</span><span class="o">&gt;</span> <span class="o">--</span><span class="n">fake</span><span class="o">-</span><span class="n">intial</span>
</pre></div>
</div>
<p>That will mark all existing attributes as created and the migration-system can be used without errors again. Please make sure, that no newly added attributes are present in the <code class="docutils literal notranslate"><span class="pre">models.py</span></code> of the app of which the migrations should be fixed.</p>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">webcentral</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Django - Migrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="contentSecurityPolicy.html">Content security policy (CSP)</a></li>
<li class="toctree-l1"><a class="reference internal" href="templateStructure.html">Template structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="translation.html">Translation of Content</a></li>
<li class="toctree-l1"><a class="reference internal" href="loadProfiles.html">Load Profiles</a></li>
<li class="toctree-l1"><a class="reference internal" href="plotlyApps.html">Plotly Apps</a></li>
<li class="toctree-l1"><a class="reference internal" href="plotlyApps.html#framework">Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="useCases.html">Use Cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="useCases.html#usecase-model-documentation"><code class="docutils literal notranslate"><span class="pre">UseCase</span></code> Model Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="useCases.html#use-cases-plotly-documentation">Use Cases plotly documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="useCases.html#further-information">Further Information</a></li>
<li class="toctree-l1"><a class="reference internal" href="listing_pages.html">Listing pages</a></li>
<li class="toctree-l1"><a class="reference internal" href="production.html">Running the app in production</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">Welcome to webcentral’s documentation!</a></li>
      <li>Next: <a href="contentSecurityPolicy.html" title="next chapter">Content security policy (CSP)</a></li>
  </ul></li>
</ul>
</div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2023, DVG.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 7.4.7</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 0.7.16</a>
      
      |
      <a href="_sources/migrations.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>